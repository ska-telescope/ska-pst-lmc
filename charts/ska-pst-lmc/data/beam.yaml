name: "beam-{{.Release.Name}}"
function: ska-pst-lmc-test
domain: ska-pst-lmc
instances: ["0001"]
entrypoints:
  - name: "receive_device.PstReceive"
    path: "/app/src/ska_pst_lmc/receive/receive_device.py"
  - name: "smrb_device.PstSmrb"
    path: "/app/src/ska_pst_lmc/smrb/smrb_device.py"
  - name: "beam.PstBeam"
    path: "/app/src/ska_pst_lmc/beam/beam_device.py"
server:
  name: "low-pst-beam"
  instances:
    - name: "0001"
      classes:
      - name: "PstReceive"
        devices:
        - name: "low_pst/recv/0001"
          properties:
          - name: "process_api_endpoint"
            values:
            - "{{.Release.Name}}-{{.Values.recv.recv_process_api_endpoint}}"
          - name: "monitoring_polling_rate"
            values:
            - "{{.Values.recv.monitor_polling_rate}}"
          attribute_properties:
          - attribute: "simulationMode"
            properties:
            - name: "__value"
              values:
              - "{{.Values.recv.simulationMode}}"
      - name: "PstSmrb"
        devices:
        - name: "low_pst/smrb/0001"
          properties:
          - name: "process_api_endpoint"
            values:
            - "{{.Release.Name}}-{{.Values.smrb.smrb_process_api_endpoint}}"
          - name: "monitoring_polling_rate"
            values:
            - "{{.Values.smrb.monitor_polling_rate}}"
          attribute_properties:
          - attribute: "simulationMode"
            properties:
            - name: "__value"
              values:
              - "{{.Values.smrb.simulationMode}}"
      - name: "PstBeam"
        devices:
        - name: "low_pst/beam/0001"
          properties:
          - name: "beam_id"
            values:
            - "1"
          - name: "RecvFQDN"
            values:
            - "low_pst/recv/0001"
          - name: "SmrbFQDN"
            values:
            - "low_pst/smrb/0001"
          - name: "DspFQDN"
            values:
            - "low_pst/dsp/0001"
          - name: "SendFQDN"
            values:
            - "low_pst/send/0001"
          attribute_properties:
          - attribute: "simulationMode"
            properties:
            - name: "__value"
              values:
              - "{{.Values.beam.simulationMode}}"
depends_on:
  - device: sys/database/2
image:
  registry: "{{.Values.image.registry}}"
  image: "{{.Values.image.image}}"
  tag: "{{.Values.image.tag}}"
  pullPolicy: "{{.Values.image.pullPolicy}}"
livenessProbe:
{{ toYaml .Values.livenessProbe | indent 2 }}
readinessProbe:
{{ toYaml .Values.readinessProbe | indent 2 }}
